<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>Deep Voice Detection Service</title>
  <meta name="description" content="">
  <meta name="keywords" content="">

  <!-- Favicons -->
  <link href="/templates/assets/img/favicon.png" rel="icon">
  <link href="/templates/assets/img/apple-touch-icon.png" rel="apple-touch-icon">

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Raleway:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="/templates/assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="/templates/assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="/templates/assets/vendor/aos/aos.css" rel="stylesheet">
  <link href="/templates/assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">
  <link href="/templates/assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">

  <!-- Main CSS File -->
  <link href="/templates/assets/css/main.css" rel="stylesheet">
  

  <!-- =======================================================
  * Template Name: Appland
  * Template URL: https://bootstrapmade.com/free-bootstrap-app-landing-page-template/
  * Updated: Aug 07 2024 with Bootstrap v5.3.3
  * Author: BootstrapMade.com
  * License: https://bootstrapmade.com/license/
  ======================================================== -->

  <style>
#secure-img {
  display: block;
  margin: 0 auto;
  height: 300px; /* 고정된 높이 설정 */
  padding-bottom: 20px;
}


#result_header{font-weight: 600; font-size: 60px;}
.result {
  text-align: center;
  margin-top: 20px;
  font-weight: 900;
  font-size: larger;
  padding-bottom: 30px;
}
#result_content{font-size: x-large; padding-bottom: 15px;}

/* 분석 시작 버튼이 중앙 하단에 위치하는 스타일 */
#retry_btn {
        position: relative;
        top: 20px;
        padding: 5px 15px;
        font-size: 25px;
        background: linear-gradient(90deg, #0084ff, #ff0000);
        color: #fff;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        transition: background-position 1s ease-in-out;
        background-size: 200% 100%;
        background-position: 200% 0;
        font-weight: 500;
    }

/* 마우스 호버 시 그라데이션 애니메이션 */
#retry_btn:hover {
    background-position: 0 0;
}


@media (max-width: 1468px) {
  #secure-img {
  height: 300px;
}
}

@media (max-width: 968px) {
  #secure-img {
  height: 250px;
}
}
@media (max-width: 490px) {
  #secure-img {
  height: 200px;
}
#retry_btn {font-size: 20px;}
}
  </style>
</head>

<body class="starter-page-page">

  <header id="header" class="header d-flex align-items-center sticky-top">
    <div class="container-fluid container-xl position-relative d-flex align-items-center">

      <a href="/" class="logo d-flex align-items-center me-auto">
        <!-- Uncomment the line below if you also wish to use an image logo -->
        <!-- <img src="/templates/assets/img/logo.png" alt=""> -->
        <h1 class="sitename">Deep Voice Detection Service</h1>
      </a>

      <nav id="navmenu" class="navmenu" style="display: none;">
        <ul>
          <li><a href="#hero">Home</a></li>
          <li><a href="#about">About</a></li>
          <li><a href="#features">Features</a></li>
          <li><a href="#gallery">Gallery</a></li>
          <li><a href="#pricing">Pricing</a></li>
          <li><a href="#faq">F.A.Q</a></li>
          <li class="dropdown"><a href="#"><span>Dropdown</span> <i class="bi bi-chevron-down toggle-dropdown"></i></a>
            <ul>
              <li><a href="#">Dropdown 1</a></li>
              <li class="dropdown"><a href="#"><span>Deep Dropdown</span> <i class="bi bi-chevron-down toggle-dropdown"></i></a>
                <ul>
                  <li><a href="#">Deep Dropdown 1</a></li>
                  <li><a href="#">Deep Dropdown 2</a></li>
                  <li><a href="#">Deep Dropdown 3</a></li>
                  <li><a href="#">Deep Dropdown 4</a></li>
                  <li><a href="#">Deep Dropdown 5</a></li>
                </ul>
              </li>
              <li><a href="#">Dropdown 2</a></li>
              <li><a href="#">Dropdown 3</a></li>
              <li><a href="#">Dropdown 4</a></li>
            </ul>
          </li>
          <li><a href="#contact">Contact</a></li>
        </ul>
        <i class="mobile-nav-toggle d-xl-none bi bi-list"></i>
      </nav>

      <a class="btn-getstarted" href="/input-page">Get Started</a>

    </div>
  </header>

  <main class="main">

    <!-- Page Title -->
    <div class="page-title light-background">
      <div class="container">
        <nav class="breadcrumbs">
          <ol>
            <li><a href="/">Home</a></li>
            <li><a href="/input-page">Processing Page</a></li>
            <li class="current">Result Page</li>
          </ol>
        </nav>
        <h1>Result Page</h1>
      </div>
    </div><!-- End Page Title -->

    <!-- Starter Section Section -->
    <section id="starter-section" class="starter-section section">
      <div class="inner-container">
      <!-- Section Title -->
      <div class="container section-title" data-aos="fade-up" style="padding-bottom: 10px;">
        <img src="" id="secure-img" alt="resultImg">
        <div id="result_header"></div>
      </div><!-- End Section Title -->

      <div class="container" data-aos="fade-up">
        <div class="result">
          <div id="result_content"></div>
          <div id="result_comment"></div>
          <button id="retry_btn" >다시 하기</button>
        </div>
      </div>
    </div>
    </section>
  </main>

  <footer id="footer" class="footer">

    <div class="footer-newsletter" style="display: none;">
      <div class="container">
        <div class="row justify-content-center text-center">
          <div class="col-lg-6">
            <h4>Join Our Newsletter</h4>
            <p>Subscribe to our newsletter and receive the latest news about our products and services!</p>
            <form action="forms/newsletter.php" method="post" class="php-email-form">
              <div class="newsletter-form"><input type="email" name="email"><input type="submit" value="Subscribe"></div>
              <div class="loading">Loading</div>
              <div class="error-message"></div>
              <div class="sent-message">Your subscription request has been sent. Thank you!</div>
            </form>
          </div>
        </div>
      </div>
    </div>

    <div class="container footer-top" style="padding-top: 20px;">
      <div class="row gy-4">
        <div class="col-lg-4 col-md-6 footer-about">
          <a href="/" class="d-flex align-items-center">
            <span class="sitename">Team 말벌</span>
          </a>
          <div class="footer-contact pt-3">
            <p><strong>국립공주대학교 </strong> 천안, NY 31080</p><p></p>
            <p class="mt-3"><strong>Phone:</strong> <span>+82 10-2849-8250</span></p>
            <p><strong>Email:</strong> <span>ckd5310@naver.com</span></p>
          </div>
        </div>

        <div class="col-lg-4 col-md-3 footer-links">
          <h4 style="padding-top: 10px;">Team Member</h4>
          <ul>
            <li style="padding-bottom: 0px;"><i class="bi bi-chevron-right"></i>Gwangun Yu (유광운)</li>
            <li style="padding-bottom: 0px;"><i class="bi bi-chevron-right"></i>Gilhan Choi (최길한)</li>
            <li style="padding-bottom: 0px;"><i class="bi bi-chevron-right"></i>Changbae Yang (양창배)</li>
          </ul>
        </div>


        <div class="col-lg-4 col-md-3 footer-links">
          <h4 style="padding-top: 10px;">Project Advisor</h4>
          <ul>
            <li style="padding-bottom: 0px;"><i class="bi bi-chevron-right"></i>Prof. Yonggang Kim (김용강), Ph.D.</li>
            <li style="padding-bottom: 0px;"><i class="bi bi-chevron-right"></i>Division of Computer Science and Engineering</li>
            <li style="padding-bottom: 0px;"><i class="bi bi-chevron-right"></i>Kongju National University</li>
          </ul>
        </div>

      </div>
    </div>

    <div class="container copyright text-center mt-4" style="display: none;">
      <p>© <span>Copyright</span> <strong class="px-1 sitename">Appland</strong> <span>All Rights Reserved</span></p>
      <div class="credits">
        <!-- All the links in the footer should remain intact. -->
        <!-- You can delete the links only if you've purchased the pro version. -->
        <!-- Licensing information: https://bootstrapmade.com/license/ -->
        <!-- Purchase the pro version with working PHP/AJAX contact form: [buy-url] -->
        Designed by <a href="https://bootstrapmade.com/">BootstrapMade</a>
      </div>
    </div>

  </footer>

  <!-- Scroll Top -->
  <a href="#" id="scroll-top" class="scroll-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

  <!-- Preloader -->
  <div id="preloader"></div>

  <!-- Vendor JS Files -->
  <script src="/templates/assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="/templates/assets/vendor/php-email-form/validate.js"></script>
  <script src="/templates/assets/vendor/aos/aos.js"></script>
  <script src="/templates/assets/vendor/swiper/swiper-bundle.min.js"></script>
  <script src="/templates/assets/vendor/glightbox/js/glightbox.min.js"></script>

  <!-- Main JS File -->
<script src="/templates/assets/js/main.js"></script>
<script>
  // 기존 코드
  var retryBtn = document.getElementById('retry_btn');
  retryBtn.addEventListener('mouseover', () => {
    retryBtn.style.backgroundPosition = '0 0';
  });
  retryBtn.addEventListener('mouseout', () => {
    retryBtn.style.backgroundPosition = '200% 0';
  });
  retryBtn.addEventListener("click", async () => {
    window.location.href = "/input-page";
  });

  // localStorage에서 서버 데이터를 가져옴
  const serverData = JSON.parse(localStorage.getItem('serverData'));
  console.log(serverData);
  localStorage.removeItem('serverData');

  var secure_img = document.getElementById('secure-img');
  var result_header = document.getElementById('result_header');
  var result_content = document.getElementById('result_content');
  var result_comment = document.getElementById('result_comment');

  result_header.innerText = "";
  result_content.innerText = "";
  result_comment.innerText = "";

  if (serverData) {
    if (serverData.real >= 90) {
      secure_img.src = "/templates/assets/img/outputpage/secure.png";
      result_header.innerText = `Secure`;
      result_header.style.color = "rgb(18 182 176)";
      result_comment.innerText = '해당 음성 데이터는 믿을 수 있습니다.\n 실제 사용자에 의해 녹음된 음성으로 판단됩니다.';
      animatePercentage(serverData.real, '딥 보이스가 아닐 확률');  // real 값 애니메이션
    } else if (serverData.real >= 70) {
      secure_img.src = "/templates/assets/img/outputpage/attention.png";
      result_header.innerText = `Attention`;
      result_header.style.color = "rgb(255 191 1)";
      result_comment.innerText = '원본 음성 데이터의 품질이 좋지 않습니다.\n 재 검사나 일부 구간을 잘라서 다시 주세요.';
      animatePercentage(serverData.fake, '딥 보이스 일 확률'); // fake 값 애니메이션
    } 
    // else if (serverData.real >= 50) {
    //   secure_img.src = "/templates/assets/img/outputpage/caution_1.png";
    //   result_header.innerText = `Caution`;
    //   result_header.style.color = "rgb(251 154 4)";
    //   result_comment.innerText = '딥 보이스 일 확률이 높습니다.\n해당 데이터에서 비롯한 피싱을 주의하세요.';
    //   animatePercentage(serverData.fake, '딥 보이스 일 확률');
    // }
     else if (serverData.real >= 30) {
      secure_img.src = "/templates/assets/img/outputpage/caution_1.png";
      result_header.innerText = `Warning`;
      result_header.style.color = "rgb(251 154 4)";
      result_comment.innerText = '딥 보이스 일 가능성이 높습니다.\n 해당 데이터는 인위적으로 생성된 것으로 의심되니 주의하세요.';
      animatePercentage(serverData.fake, '딥 보이스 일 확률');
    } else {
      secure_img.src = "/templates/assets/img/outputpage/warning.png";
      result_header.innerText = `Dangers`;
      result_header.style.color = "rgb(230 25 31)";
      result_comment.innerText = '딥 보이스 입니다.\n 해당 데이터에서 비롯한 피싱을 주의하고, \n유출 사이트와 격리를 권장합니다.';
      animatePercentage(serverData.fake, '딥 보이스 일 확률');
    }
  } else {
    console.error("서버 데이터가 없습니다.");
  }

  // fakeValue 애니메이션 함수
  function animatePercentage(value, label) {
    let startValue = 0;
    const duration = 1600; // 애니메이션 시간
    const startTime = performance.now();
    const targetElement = document.getElementById('result_content');

    function update() {
      const currentTime = performance.now();
      const elapsedTime = currentTime - startTime;
      const progress = Math.min(elapsedTime / duration, 1); // 1을 초과하지 않도록 제한

      let currentValue;
      
      if (progress < 1) {
        // 애니메이션 진행 중에는 정수로 표시
        currentValue = Math.floor(progress * value);
      } else {
        // 애니메이션이 끝난 후 소수점 1자리 유지
        currentValue = value.toFixed(1);
        
        // 소수점 첫째 자리가 0이면 정수로 변환
        if (currentValue.endsWith('.0')) {
          currentValue = parseInt(currentValue, 10); // 정수 형태로 변환
        }
      }

      targetElement.innerHTML = `${label} <span style="font-size: 1.2em; font-weight: bold;">${currentValue}%</span>`;

      if (progress < 1) {
        requestAnimationFrame(update);
      }
    }


    requestAnimationFrame(update);
  }
</script>

</body>

</html>